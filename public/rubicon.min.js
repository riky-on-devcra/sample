(function(){const e={locale:window.rubiconSetting&&window.rubiconSetting.locale||"en",environment:window.rubiconSetting&&window.rubiconSetting.environment||"devcra",type:window.rubiconSetting&&window.rubiconSetting.type||"sidepanel"};console.log("[RUBICON] rubiconConfig",e);const t=375;const o="0.4s";const n="cubic-bezier(0.4, 0, 0.2, 1)";const i="https://enhans.new.rubicon.dev.devcra.com";const r="https://enhans-uk.new.rubicon.dev.devcra.com";const s="https://enhans.new.rubicon.dev.devcra.com";const c="https://enhans-uk.new.rubicon.dev.devcra.com";const l=[s,c];const a=[...l,"https://p6-pre-qa3.samsung.com","https://dev-www.samsung.com","https://stg-www.samsung.com","https://stg2-www.samsung.com","https://dev-familynet.samsung.com","https://dev-familynet-epp.samsung.com","https://dev-www.familynet.kr","https://dev-familynet.samsung.com","https://stg-familynet.samsung.com","https://samsung.com"];var d=false;var u,g,m,f;const p=new Set;function w(e){try{return document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(t){console.error("[RUBICON] Failed to get element by xpath:",e,t);return null}}function h(t="samsung"){if(t=="samsung"){if(e.locale==="ko"){return'<div class="utility__button__rubicon noitem" data-name="utility__rubicon">'+'<button class="rubicon__button" data-di-id="di-id-8d7c0ff0-62192679">'+'<span class="sr-only">ë£¨ë¹„ì½˜ ë²„íŠ¼</span>'+'<svg width="24" height="24" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">'+'<g clip-path="url(#clip0_199_8102)">'+'<path fill-rule="evenodd" clip-rule="evenodd" d="M5.70707 1.73009C5.90225 1.62691 6.03526 1.42184 6.03526 1.1857C6.03526 0.84583 5.75974 0.570312 5.41987 0.570312C5.08 0.570312 4.80449 0.84583 4.80449 1.1857C4.80449 1.42185 4.93751 1.62694 5.13271 1.73011V2.35497H2.85581C2.08494 2.35497 1.46094 2.97897 1.46094 3.74984V7.13446C1.46094 7.90532 2.08494 8.52933 2.85581 8.52933H2.94812V10.1088C2.94812 10.2168 3.0133 10.3142 3.11318 10.3554C3.21307 10.3965 3.32791 10.3734 3.40403 10.2967L5.15863 8.52933H7.98401C8.75488 8.52933 9.37889 7.90532 9.37889 7.13446V3.74984C9.37889 2.97897 8.75488 2.35497 7.98401 2.35497H5.70707V1.73009ZM3.49499 4.67518C3.49499 4.41801 3.70347 4.20954 3.96063 4.20954C4.2178 4.20954 4.42627 4.41801 4.42627 4.67518C4.42627 4.93234 4.2178 5.14082 3.96063 5.14082C3.70347 5.14082 3.49499 4.93234 3.49499 4.67518ZM6.41397 4.67518C6.41397 4.41801 6.62244 4.20954 6.87961 4.20954C7.13677 4.20954 7.34525 4.41801 7.34525 4.67518C7.34525 4.93234 7.13677 5.14082 6.87961 5.14082C6.62244 5.14082 6.41397 4.93234 6.41397 4.67518ZM4.59501 5.89128C4.50025 5.7641 4.32032 5.73782 4.19314 5.83259C4.06596 5.92736 4.03969 6.10728 4.13446 6.23446C4.80109 7.12909 6.15094 7.12909 6.81758 6.23446C6.91235 6.10728 6.88607 5.92736 6.75889 5.83259C6.63171 5.73782 6.45179 5.7641 6.35702 5.89128C5.92007 6.47767 5.03197 6.47767 4.59501 5.89128Z" fill="currentColor"/>'+"</g>"+'<defs><clipPath id="clip0_199_8102"><rect width="9.84615" height="9.84615" fill="white" transform="translate(0.564453 0.492188)"/></clipPath></defs>'+"</svg>"+"</button>"+"</div>"}else{return'<a class="nv00-gnb-v4__utility nv00-gnb-v4__utility-rubicon nv00-gnb-v4__utility-btn js-global-rubicon-btn" href="#" an-tr="nv00_gnb-home-gnb cart icon-navigation6" an-ca="navigation" an-ac="gnb" an-la="rubicon" role="button">'+'<span class="hidden">Rubicon</span>'+'<svg width="24" height="24" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">'+'<g clip-path="url(#clip0_199_8102)">'+'<path fill-rule="evenodd" clip-rule="evenodd" d="M5.70707 1.73009C5.90225 1.62691 6.03526 1.42184 6.03526 1.1857C6.03526 0.84583 5.75974 0.570312 5.41987 0.570312C5.08 0.570312 4.80449 0.84583 4.80449 1.1857C4.80449 1.42185 4.93751 1.62694 5.13271 1.73011V2.35497H2.85581C2.08494 2.35497 1.46094 2.97897 1.46094 3.74984V7.13446C1.46094 7.90532 2.08494 8.52933 2.85581 8.52933H2.94812V10.1088C2.94812 10.2168 3.0133 10.3142 3.11318 10.3554C3.21307 10.3965 3.32791 10.3734 3.40403 10.2967L5.15863 8.52933H7.98401C8.75488 8.52933 9.37889 7.90532 9.37889 7.13446V3.74984C9.37889 2.97897 8.75488 2.35497 7.98401 2.35497H5.70707V1.73009ZM3.49499 4.67518C3.49499 4.41801 3.70347 4.20954 3.96063 4.20954C4.2178 4.20954 4.42627 4.41801 4.42627 4.67518C4.42627 4.93234 4.2178 5.14082 3.96063 5.14082C3.70347 5.14082 3.49499 4.93234 3.49499 4.67518ZM6.41397 4.67518C6.41397 4.41801 6.62244 4.20954 6.87961 4.20954C7.13677 4.20954 7.34525 4.41801 7.34525 4.67518C7.34525 4.93234 7.13677 5.14082 6.87961 5.14082C6.62244 5.14082 6.41397 4.93234 6.41397 4.67518ZM4.59501 5.89128C4.50025 5.7641 4.32032 5.73782 4.19314 5.83259C4.06596 5.92736 4.03969 6.10728 4.13446 6.23446C4.80109 7.12909 6.15094 7.12909 6.81758 6.23446C6.91235 6.10728 6.88607 5.92736 6.75889 5.83259C6.63171 5.73782 6.45179 5.7641 6.35702 5.89128C5.92007 6.47767 5.03197 6.47767 4.59501 5.89128Z" fill="currentColor"/>'+"</g>"+'<defs><clipPath id="clip0_199_8102"><rect width="9.84615" height="9.84615" fill="white" transform="translate(0.564453 0.492188)"/></clipPath></defs>'+"</svg>"+"</a>"}}else if(t=="familynet"){if(e.locale==="ko"){return"<div>"+'<button style="width: 48px; height: 48px; border-radius: 50%; background: #0071e3; color: white; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">'+'<span class="sr-only">ë£¨ë¹„ì½˜ ë²„íŠ¼</span>'+"ðŸ¤–"+"</button>"+"</div>"}else{return"<div>"+'<button style="width: 48px; height: 48px; border-radius: 50%; background: #0071e3; color: white; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">'+'<span class="sr-only">Rubicon</span>'+"ðŸ¤–"+"</button>"+"</div>"}}else{return"<i>unknown</i>"}}function b(t=false){console.log("[RUBICON] _toggleRubicon",{skipAnimation:t});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] _toggleRubicon",{skipAnimation:t})}if(e.type==="sidepanel"){y(t)}else if(e.type==="embedded"){C(t)}}function y(e=false){d=!d;if(d){if(document.getElementById("main-content"))return;u=document.createElement("div");u.id="main-content";u.style.height="100vh";u.style.overflowY="auto";u.style.width="calc(100% - "+t+"px)";u.style.transition=e?"none":"width "+o+" "+n;u.style.position="relative";while(document.body.firstChild&&document.body.firstChild!==g){u.appendChild(document.body.firstChild)}document.body.appendChild(u);g=document.createElement("div");g.id="aibot-wrapper";g.style.position="fixed";g.style.top="0";g.style.right="0";g.style.height="100vh";g.style.width=t+"px";g.style.transform="translateX(100%)";g.style.transition=e?"none":"transform "+o+" "+n;g.style.overflowY="hidden";g.style.zIndex="2147484001";var i=document.createElement("iframe");i.src=B(e);i.style.width="100%";i.style.height="100%";i.style.border="none";g.appendChild(i);document.body.appendChild(g);m=document.createElement("div");m.id="aibot-divider";m.style.position="fixed";m.style.top="0";m.style.right=t+"px";m.style.width="2px";m.style.height="100vh";m.style.backgroundColor="#ccc";m.style.zIndex="9998";document.body.appendChild(m);if(e){g.style.transform="translateX(0)"}else{setTimeout((function(){g.style.transform="translateX(0)"}),10)}}else{g.style.transform="translateX(100%)";m.remove();setTimeout((function(){while(u.firstChild){document.body.insertBefore(u.firstChild,u)}u.remove();g.remove()}),400)}}function C({skipAnimation:e=false,position:t="bottom-right"}){d=!d;if(d){if(document.getElementById("aibot-wrapper"))return;g=document.createElement("div");g.id="aibot-wrapper";g.style.position="fixed";g.style.width="400px";g.style.height="600px";g.style.borderRadius="8px";g.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)";g.style.zIndex="2147484001";g.style.overflow="hidden";g.style.transition=e?"none":"opacity "+o+" "+n;switch(t){case"bottom-right":g.style.bottom="80px";g.style.right="20px";g.style.transform="translateY(calc(100% + 20px))";break;case"bottom-left":g.style.bottom="80px";g.style.left="20px";g.style.transform="translateY(calc(100% + 20px))";break;case"top-right":g.style.top="20px";g.style.right="20px";g.style.transform="translateY(calc(-100% - 20px))";break;case"top-left":g.style.top="20px";g.style.left="20px";g.style.transform="translateY(calc(-100% - 20px))";break}var i=document.createElement("iframe");i.src=B(e);i.style.width="100%";i.style.height="100%";i.style.border="none";g.appendChild(i);document.body.appendChild(g);if(e){g.style.opacity="1";g.style.transform="translateY(0)"}else{setTimeout((function(){g.style.opacity="1";g.style.transform="translateY(0)"}),10)}}else{g.style.opacity="0";g.style.transform=t.startsWith("bottom")?"translateY(calc(100% + 100px))":"translateY(calc(-100% - 100px))";setTimeout((function(){g.remove()}),400)}}function v(){if(e.locale==="ko"){return document.querySelector(".utility__button__cart")}else{return document.querySelector(".nv00-gnb-v4__container .nv00-gnb-v4__utility-cart")}}function x(){f=document.createElement("div");f.innerHTML=h("samsung");var e=f.querySelector("button")||f.querySelector("a");var t=function(){var e=v();if(e&&e.parentNode){e.parentNode.insertBefore(f.firstElementChild,e);return true}console.error("[RUBICON] failed to find cart button");return false};if(!t()){var o=new MutationObserver((function(){if(t())o.disconnect()}));o.observe(document.body,{childList:true,subtree:true})}e.onclick=()=>b(false)}function I(){f=document.createElement("div");f.innerHTML=h("familynet");f.style.position="fixed";f.style.bottom="20px";f.style.right="20px";f.style.zIndex="2147484001";var e=f.querySelector("button")||f.querySelector("a");document.body.appendChild(f);e.onclick=()=>b(false)}function R(){console.log("[RUBICON] initRubicon",{rubiconConfig:e});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] initRubicon",{rubiconConfig:e})}if(e.environment==="devcra"){x()}else if(e.environment==="familynet"){I()}const t=window.aisearch?.nlq;if(typeof t==="object"&&t?.flag===true&&t.query){console.log("[RUBICON] aisearch-v2 nlq flag is true",window.aisearch.nlq);window.rubicon.openRubicon(window.aisearch.nlq.query);return}const o=localStorage.getItem("rubicon-pending-iframe")==="1";if(o&&!d){b(true);localStorage.removeItem("rubicon-pending-iframe")}for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(t&&t.startsWith("rubicon-actions:")){console.log("[RUBICON] found actions:",t);if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] found actions:",t)}const e=t.split(":")[1];window.rubicon.consumeActions(e)}}}window.addEventListener("message",(function(e){if(!e||!e.data)return;const{type:t,method:o,args:n}=e.data;if(!l.includes(e.origin))return;console.log("[RUBICON] received message:",e.origin,e.data);if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] received message:",e.origin,e.data)}if(t==="rubicon-command"&&window.rubicon&&typeof window.rubicon[o]==="function"){try{console.log(`[RUBICON] iframe command: rubicon.${o}(${(n||[]).join(", ")})`);try{const t=window.rubicon[o](...n||[]);if(t instanceof Promise){t.then((t=>{e.source.postMessage({type:"rubicon-response",method:o,requestId:e.data.requestId,result:t},e.origin)})).catch((t=>{e.source.postMessage({type:"rubicon-response",method:o,requestId:e.data.requestId,error:String(t)},e.origin)}))}else{e.source.postMessage({type:"rubicon-response",method:o,requestId:e.data.requestId,result:t},e.origin)}}catch(e){console.error("[RUBICON] Execution error:",e)}}catch(e){console.error("[RUBICON] Command failed:",o,e)}}}));function O(){return e.locale==="ko"?s:c}function B(t=false){const o=(e.locale==="ko"?i:r)+`${t?"":""}`;console.log("[RUBICON] RubiconEndpoint",o);return o}const N=e=>{const t=document.getElementById("aibot-wrapper")?.querySelector("iframe");if(!t){console.warn("[RUBICON] iframe not found when trying to send message");return}console.log("[RUBICON] sending send-message:",e);if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] sending send-message:",e)}t.contentWindow?.postMessage({type:"send-message",data:e},O())};function U({selector:e,xpath:t,timeout:o=5e3,interval:n=200}){return new Promise(((i,r)=>{const s=Date.now();function c(){let l=e?document.querySelector(e):null;if(!l&&t)l=w(t);if(l)return i(l);if(Date.now()-s>o)return r(new Error("Element not found"));setTimeout(c,n)}c()}))}window.rubicon={getMetadata:()=>{const e=window.location.href;const t=document.getElementById("main-content");const o=t?t.innerHTML:null;return{currentUrl:e,currentHtml:o}},takeSnapshot:()=>new Promise(((e,t)=>{function o(){return new Promise(((e,t)=>{if(typeof html2canvas!=="undefined")return e();const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js";o.onload=e;o.onerror=t;document.head.appendChild(o)}))}o().then((()=>{const o=document.getElementById("main-content")||document.body;html2canvas(o,{useCORS:true,allowTaint:true,logging:false,windowWidth:document.documentElement.scrollWidth,windowHeight:document.documentElement.scrollHeight}).then((t=>{const o=t.toDataURL("image/png");e(o)})).catch((e=>{t(e)}))})).catch(t)})),toggleRubicon:()=>b(false),openRubicon:e=>{console.log("[RUBICON] openRubicon",{initialMessage:e});const t=o=>{if(o.data?.type==="rubicon-ready"&&a.includes(o.origin)){console.log("[RUBICON] iframe reported ready, sending message");if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] iframe reported ready, sending message")}window.removeEventListener("message",t);N(e)}};if(!d){if(e){window.addEventListener("message",t);const e=new MutationObserver((()=>{const t=document.getElementById("aibot-wrapper")?.querySelector("iframe");if(t){e.disconnect();t.onload=()=>{console.log("[RUBICON] iframe loaded (onload)");if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] iframe loaded (onload)")}}}}));e.observe(document.body,{childList:true,subtree:true})}b(e?true:false)}},canAskRubicon:()=>{if(d){return true}return false},askRubicon:e=>{if(window.rubicon.canAskRubicon()){N(e)}},addActions:(e,t,o=false)=>{console.log("[RUBICON] addActions",{id:e,actions:t,autoRun:o});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] addActions",{id:e,actions:t,autoRun:o})}if(typeof e==="string"&&Array.isArray(t)){try{localStorage.setItem(`rubicon-actions:${e}`,JSON.stringify(t));if(o){window.rubicon.consumeActions(e)}}catch(e){console.error("[RUBICON] Failed to store actions:",e)}}},consumeActions:e=>{console.log("[RUBICON] consumeActions",{id:e});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] consumeActions",{id:e})}if(p.has(e))return;const t=localStorage.getItem(`rubicon-actions:${e}`);if(!t)return;const o=JSON.parse(t);if(!o.length)return;if(!d){b(true)}p.add(e);const n=()=>{const t=o.shift();if(!t){localStorage.removeItem(`rubicon-actions:${e}`);p.delete(e);return}localStorage.setItem(`rubicon-actions:${e}`,JSON.stringify(o));console.log("[RUBICON] consumeActions",{current:t});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] consumeActions",{current:t})}try{switch(t.action){case"GO_TO":if(t.value){setTimeout((()=>{window.location.href=t.value}),100);if(o.length===0){localStorage.setItem("rubicon-pending-iframe","1")}return}break;case"CLICK":{U({selector:t.selector,xpath:t.xpath}).then((e=>{try{e.click();console.log(`[RUBICON] CLICK action succeeded: selector=${t.selector||t.xpath}`);if(window.rubicon?.logger){window.rubicon.logger.log(`[RUBICON] CLICK action succeeded: selector=${t.selector||t.xpath}`)}if(o.length===0){localStorage.setItem("rubicon-pending-iframe","1")}}catch(e){console.warn(`[RUBICON] CLICK action failed (exception): selector=${t.selector||t.xpath}`,e)}setTimeout(n,500)})).catch((e=>{console.warn(`[RUBICON] CLICK action failed (not found): selector=${t.selector||t.xpath}`,e);setTimeout(n,500)}));return}case"SCROLL":{U({selector:t.selector,xpath:t.xpath}).then((e=>{try{e.scrollIntoView({behavior:"smooth",block:"center"});console.log(`[RUBICON] SCROLL action succeeded: selector=${t.selector||t.xpath}`);const o=new IntersectionObserver(((e,t)=>{const o=e.some((e=>e.isIntersecting));if(o){t.disconnect();setTimeout(n,200)}}));o.observe(e)}catch(e){console.warn(`[RUBICON] SCROLL action failed (exception): selector=${t.selector||t.xpath}`,e);setTimeout(n,500)}})).catch((e=>{console.warn(`[RUBICON] SCROLL action failed (not found): selector=${t.selector||t.xpath}`,e);setTimeout(n,500)}));return}default:console.warn("Unknown action type:",t.action)}console.log("[RUBICON] consumed action",t.action);if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] consumed action",t.action)}}catch(e){console.error("[RUBICON] Action execution failed:",e)}if(o.length>0)return setTimeout(n,500);localStorage.removeItem(`rubicon-actions:${e}`);p.delete(e)};setTimeout(n,1e3)},inspectActions:()=>{const e=[];for(let t=0;t<localStorage.length;t++){const o=localStorage.key(t);if(o&&o.startsWith("rubicon-actions:")){try{const t=JSON.parse(localStorage.getItem(o));e.push({id:o.split(":")[1],actions:t})}catch(e){console.error("[RUBICON] Failed to parse:",o,e)}}}console.log("[RUBICON] inspectActions",{entries:e});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] inspectActions",{entries:e})}},clearActions:()=>{console.log("[RUBICON] clearActions");if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] clearActions")}const e=[];for(let t=0;t<localStorage.length;t++){const o=localStorage.key(t);if(o&&o.startsWith("rubicon-actions:")){e.push(o)}}e.forEach((e=>localStorage.removeItem(e)));console.log(`[RUBICON] Cleared ${e.length} action(s):`,e);if(window.rubicon?.logger){window.rubicon.logger.log(`[RUBICON] Cleared ${e.length} action(s):`,e)}},logger:function(){const e=document.createElement("div");e.id="rubicon-logger";e.style.cssText=`\n        position: fixed;\n        top: 8px;\n        left: 8px;\n        width: 300px;\n        min-width: 240px;\n        max-width: 360px;\n        max-height: 300px;\n        overflow-y: auto;\n        z-index: 2147483647;\n        background: rgba(0, 0, 0, 0.85);\n        color: #0f0;\n        font-family: monospace;\n        font-size: 10px;\n        padding: 8px;\n        border-radius: 4px;\n        box-shadow: 0 0 4px rgba(0,0,0,0.6);\n        display: none;\n        white-space: pre-wrap;\n      `;document.body.appendChild(e);return{show(){e.style.display="block"},hide(){e.style.display="none"},log(...t){const o=document.createElement("div");o.textContent=t.map((e=>{if(e===window.rubicon){return"[RUBICON] window.rubicon object"}if(typeof e==="object"&&e!==null){try{return JSON.stringify(e,null,2)}catch(t){console.error("[RUBICON] Failed to stringify:",e,t);return String(e)}}return String(e)})).join(" ");e.appendChild(o);e.scrollTop=e.scrollHeight}}}()};if(document.readyState==="loading"){window.addEventListener("DOMContentLoaded",R)}else{R()}})();