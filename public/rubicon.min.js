(function(){const e={locale:window.rubiconSetting&&window.rubiconSetting.locale||"en",environment:window.rubiconSetting&&window.rubiconSetting.environment||"devcra",type:window.rubiconSetting&&window.rubiconSetting.type||"sidepanel",showButton:window.rubiconSetting&&window.rubiconSetting.showButton||false,options:window.rubiconSetting&&window.rubiconSetting.options||{width:380,height:600,buttonRight:20,buttonBottom:80}};console.log("[RUBICON] rubiconConfig",e);const o=375;const t=e.options.width||380;const n=e.options.height||600;const i=e.options.right||32;const r=e.options.bottom||146;const s=e.options.borderRadius||8;const c=e.options.boxShadow||"0 4px 12px rgba(0, 0, 0, 0.15)";const l=e.showButton||false;const a="0.4s";const d="cubic-bezier(0.4, 0, 0.2, 1)";const u="https://dev-aibot-kr.samsung.com";const g="https://dev-aibot-kr.samsung.com";const p=[g];const m=[...p,"https://p6-pre-qa3.samsung.com","https://dev-www.samsung.com","https://stg-www.samsung.com","https://stg2-www.samsung.com","https://dev-familynet.samsung.com","https://dev-familynet-epp.samsung.com","https://dev-www.familynet.kr","https://dev-familynet.samsung.com","https://stg-familynet.samsung.com","https://samsung.com"];var w=false;var f,b,h;const y=new Set;function C(e){try{return document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(o){console.error("[RUBICON] Failed to get element by xpath:",e,o);return null}}function I(){if(e.type==="sidepanel"){N()}else if(e.type==="embedded"){v()}}function R(o=false){console.log("[RUBICON] _toggleRubicon",{skipAnimation:o});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] _toggleRubicon",{skipAnimation:o})}if(e.type==="sidepanel"){O(o)}else if(e.type==="embedded"){x(o)}}function O(e=false){if(w){N()}else{B(e)}}function B(e=false){w=true;if(document.getElementById("main-content"))return;f=document.createElement("div");f.id="main-content";f.style.height="100vh";f.style.overflowY="auto";f.style.width="calc(100% - "+o+"px)";f.style.transition=e?"none":"width "+a+" "+d;f.style.position="relative";while(document.body.firstChild&&document.body.firstChild!==b){f.appendChild(document.body.firstChild)}document.body.appendChild(f);b=document.createElement("div");b.id="aibot-wrapper";b.style.position="fixed";b.style.top="0";b.style.right="0";b.style.height="100vh";b.style.width=o+"px";b.style.transform="translateX(100%)";b.style.transition=e?"none":"transform "+a+" "+d;b.style.overflowY="hidden";b.style.zIndex="2147484001";var t=document.createElement("iframe");t.src=A(e);t.style.width="100%";t.style.height="100%";t.style.border="none";b.appendChild(t);document.body.appendChild(b);h=document.createElement("div");h.id="aibot-divider";h.style.position="fixed";h.style.top="0";h.style.right=o+"px";h.style.width="2px";h.style.height="100vh";h.style.backgroundColor="#ccc";h.style.zIndex="9998";document.body.appendChild(h);if(e){b.style.transform="translateX(0)"}else{setTimeout((function(){b.style.transform="translateX(0)"}),10)}}function N(){w=false;b.style.transform="translateX(100%)";h.remove();setTimeout((function(){while(f.firstChild){document.body.insertBefore(f.firstChild,f)}f.remove();b.remove()}),400)}function x({skipAnimation:e=false}){if(b&&b.dataset.toggling==="true"){return}if(w){v()}else{U(e)}}function U(e=false){w=true;if(document.getElementById("aibot-wrapper")){b=document.getElementById("aibot-wrapper");b.dataset.toggling="true";b.style.display="block";b.getBoundingClientRect();b.style.opacity="1";b.style.transform="translateY(0)";setTimeout((()=>{b.dataset.toggling="false"}),400);return}b=document.createElement("div");b.id="aibot-wrapper";b.dataset.toggling="true";b.style.position="fixed";b.style.width=t+"px";b.style.height=n+"px";b.style.borderRadius=s+"px";b.style.boxShadow=c;b.style.zIndex="2147484001";b.style.overflow="hidden";b.style.transition=e?"none":"opacity "+a+" "+d;b.style.bottom=r+"px";b.style.right=i+"px";b.style.transform="translateY(calc(100% + "+r+"px))";var o=document.createElement("iframe");o.src=A(e);o.style.width="100%";o.style.height="100%";o.style.border="none";b.appendChild(o);document.body.appendChild(b);if(e){b.style.opacity="1";b.style.transform="translateY(0)";b.dataset.toggling="false"}else{b.getBoundingClientRect();setTimeout((function(){b.style.opacity="1";b.style.transform="translateY(0)";setTimeout((()=>{b.dataset.toggling="false"}),400)}),10)}}function v(){w=false;if(!b)return;b.dataset.toggling="true";b.style.opacity="0";b.style.transform=position.startsWith("bottom")?"translateY(calc(100% + 100px))":"translateY(calc(-100% - 100px))";setTimeout((function(){b.style.display="none";b.dataset.toggling="false"}),400)}function S(){if(l){console.log("[RUBICON] _createButtonIfNeeded",{SHOW_BUTTON:l});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] _createButtonIfNeeded",{SHOW_BUTTON:l})}const t=e.options.buttonRight||20;const n=e.options.buttonBottom||80;buttonWrapper=document.createElement("div");buttonWrapper.innerHTML=E();buttonWrapper.style.position="fixed";buttonWrapper.style.bottom=n+"px";buttonWrapper.style.right=t+"px";buttonWrapper.style.zIndex="2147484001";var o=buttonWrapper.querySelector("button")||buttonWrapper.querySelector("a");document.body.appendChild(buttonWrapper);o.onclick=()=>R(false)}}function E(){return"<div>"+'<button style="width: 48px; height: 48px; border-radius: 50%; background: #0071e3; color: white; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">'+'<span class="sr-only">ë£¨ë¹„ì½˜ ë²„íŠ¼</span>'+"ðŸ¤–"+"</button>"+"</div>"}function T(){console.log("[RUBICON] initRubicon",{rubiconConfig:e});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] initRubicon",{rubiconConfig:e})}S();const o=window.aisearch?.nlq;if(typeof o==="object"&&o?.flag===true&&o.query){console.log("[RUBICON] aisearch-v2 nlq flag is true",window.aisearch.nlq);window.rubicon.openRubicon(window.aisearch.nlq.query);return}const t=localStorage.getItem("rubicon-pending-iframe")==="1";if(t&&!w){R(true);localStorage.removeItem("rubicon-pending-iframe")}for(let e=0;e<localStorage.length;e++){const o=localStorage.key(e);if(o&&o.startsWith("rubicon-actions:")){console.log("[RUBICON] found actions:",o);if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] found actions:",o)}const e=o.split(":")[1];window.rubicon.consumeActions(e)}}}window.addEventListener("message",(function(e){if(!e||!e.data)return;const{type:o,method:t,args:n}=e.data;if(!p.includes(e.origin))return;console.log("[RUBICON] received message:",e.origin,e.data);if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] received message:",e.origin,e.data)}if(o==="rubicon-command"&&window.rubicon&&typeof window.rubicon[t]==="function"){try{console.log(`[RUBICON] iframe command: rubicon.${t}(${(n||[]).join(", ")})`);try{const o=window.rubicon[t](...n||[]);if(o instanceof Promise){o.then((o=>{e.source.postMessage({type:"rubicon-response",method:t,requestId:e.data.requestId,result:o},e.origin)})).catch((o=>{e.source.postMessage({type:"rubicon-response",method:t,requestId:e.data.requestId,error:String(o)},e.origin)}))}else{e.source.postMessage({type:"rubicon-response",method:t,requestId:e.data.requestId,result:o},e.origin)}}catch(e){console.error("[RUBICON] Execution error:",e)}}catch(e){console.error("[RUBICON] Command failed:",t,e)}}}));function k(){return e.locale==="ko"?g:RUBICON_UK_ORIGIN}function A(o=false){const t=(e.locale==="ko"?u:RUBICON_UK_URL)+`${o?"":""}`;console.log("[RUBICON] RubiconEndpoint",t);return t}const L=e=>{const o=document.getElementById("aibot-wrapper")?.querySelector("iframe");if(!o){console.warn("[RUBICON] iframe not found when trying to send message");return}console.log("[RUBICON] sending send-message:",e);if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] sending send-message:",e)}o.contentWindow?.postMessage({type:"send-message",data:e},k())};function q({selector:e,xpath:o,timeout:t=5e3,interval:n=200}){return new Promise(((i,r)=>{const s=Date.now();function c(){let l=e?document.querySelector(e):null;if(!l&&o)l=C(o);if(l)return i(l);if(Date.now()-s>t)return r(new Error("Element not found"));setTimeout(c,n)}c()}))}window.rubicon={getMetadata:()=>{const e=window.location.href;const o=document.getElementById("main-content");const t=o?o.innerHTML:null;return{currentUrl:e,currentHtml:t}},takeSnapshot:()=>new Promise(((e,o)=>{function t(){return new Promise(((e,o)=>{if(typeof html2canvas!=="undefined")return e();const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js";t.onload=e;t.onerror=o;document.head.appendChild(t)}))}t().then((()=>{const t=document.getElementById("main-content")||document.body;html2canvas(t,{useCORS:true,allowTaint:true,logging:false,windowWidth:document.documentElement.scrollWidth,windowHeight:document.documentElement.scrollHeight}).then((o=>{const t=o.toDataURL("image/png");e(t)})).catch((e=>{o(e)}))})).catch(o)})),toggleRubicon:()=>R(false),openSprChat:()=>{R(false);window.sprChat("open")},openRubicon:o=>{console.log("[RUBICON] openRubicon",{initialMessage:o});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] openRubicon",{initialMessage:o})}console.log("[RUBICON] rubiconConfig",e);if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] rubiconConfig",e)}const t=e=>{if(e.data?.type==="rubicon-ready"&&m.includes(e.origin)){console.log("[RUBICON] iframe reported ready, sending message");if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] iframe reported ready, sending message")}window.removeEventListener("message",t);L(o)}};if(!w){if(o){window.addEventListener("message",t);const e=new MutationObserver((()=>{const o=document.getElementById("aibot-wrapper")?.querySelector("iframe");if(o){e.disconnect();o.onload=()=>{console.log("[RUBICON] iframe loaded (onload)");if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] iframe loaded (onload)")}}}}));e.observe(document.body,{childList:true,subtree:true})}R(o?true:false)}},closeRubicon:()=>{console.log("[RUBICON] closeRubicon");if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] closeRubicon")}I()},canAskRubicon:()=>{if(w){return true}return false},askRubicon:e=>{if(window.rubicon.canAskRubicon()){L(e)}},addActions:(e,o,t=false)=>{console.log("[RUBICON] addActions",{id:e,actions:o,autoRun:t});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] addActions",{id:e,actions:o,autoRun:t})}if(typeof e==="string"&&Array.isArray(o)){try{localStorage.setItem(`rubicon-actions:${e}`,JSON.stringify(o));if(t){window.rubicon.consumeActions(e)}}catch(e){console.error("[RUBICON] Failed to store actions:",e)}}},consumeActions:e=>{console.log("[RUBICON] consumeActions",{id:e});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] consumeActions",{id:e})}if(y.has(e))return;const o=localStorage.getItem(`rubicon-actions:${e}`);if(!o)return;const t=JSON.parse(o);if(!t.length)return;if(!w){R(true)}y.add(e);const n=()=>{const o=t.shift();if(!o){localStorage.removeItem(`rubicon-actions:${e}`);y.delete(e);return}localStorage.setItem(`rubicon-actions:${e}`,JSON.stringify(t));console.log("[RUBICON] consumeActions",{current:o});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] consumeActions",{current:o})}try{switch(o.action){case"GO_TO":if(o.value){setTimeout((()=>{window.location.href=o.value}),100);if(t.length===0){localStorage.setItem("rubicon-pending-iframe","1")}return}break;case"CLICK":{q({selector:o.selector,xpath:o.xpath}).then((e=>{try{e.click();console.log(`[RUBICON] CLICK action succeeded: selector=${o.selector||o.xpath}`);if(window.rubicon?.logger){window.rubicon.logger.log(`[RUBICON] CLICK action succeeded: selector=${o.selector||o.xpath}`)}if(t.length===0){localStorage.setItem("rubicon-pending-iframe","1")}}catch(e){console.warn(`[RUBICON] CLICK action failed (exception): selector=${o.selector||o.xpath}`,e)}setTimeout(n,500)})).catch((e=>{console.warn(`[RUBICON] CLICK action failed (not found): selector=${o.selector||o.xpath}`,e);setTimeout(n,500)}));return}case"SCROLL":{q({selector:o.selector,xpath:o.xpath}).then((e=>{try{e.scrollIntoView({behavior:"smooth",block:"center"});console.log(`[RUBICON] SCROLL action succeeded: selector=${o.selector||o.xpath}`);const t=new IntersectionObserver(((e,o)=>{const t=e.some((e=>e.isIntersecting));if(t){o.disconnect();setTimeout(n,200)}}));t.observe(e)}catch(e){console.warn(`[RUBICON] SCROLL action failed (exception): selector=${o.selector||o.xpath}`,e);setTimeout(n,500)}})).catch((e=>{console.warn(`[RUBICON] SCROLL action failed (not found): selector=${o.selector||o.xpath}`,e);setTimeout(n,500)}));return}default:console.warn("Unknown action type:",o.action)}console.log("[RUBICON] consumed action",o.action);if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] consumed action",o.action)}}catch(e){console.error("[RUBICON] Action execution failed:",e)}if(t.length>0)return setTimeout(n,500);localStorage.removeItem(`rubicon-actions:${e}`);y.delete(e)};setTimeout(n,1e3)},inspectActions:()=>{const e=[];for(let o=0;o<localStorage.length;o++){const t=localStorage.key(o);if(t&&t.startsWith("rubicon-actions:")){try{const o=JSON.parse(localStorage.getItem(t));e.push({id:t.split(":")[1],actions:o})}catch(e){console.error("[RUBICON] Failed to parse:",t,e)}}}console.log("[RUBICON] inspectActions",{entries:e});if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] inspectActions",{entries:e})}},clearActions:()=>{console.log("[RUBICON] clearActions");if(window.rubicon?.logger){window.rubicon.logger.log("[RUBICON] clearActions")}const e=[];for(let o=0;o<localStorage.length;o++){const t=localStorage.key(o);if(t&&t.startsWith("rubicon-actions:")){e.push(t)}}e.forEach((e=>localStorage.removeItem(e)));console.log(`[RUBICON] Cleared ${e.length} action(s):`,e);if(window.rubicon?.logger){window.rubicon.logger.log(`[RUBICON] Cleared ${e.length} action(s):`,e)}},logger:function(){const e=document.createElement("div");e.id="rubicon-logger";e.style.cssText=`\n        position: fixed;\n        top: 8px;\n        left: 8px;\n        width: 300px;\n        min-width: 240px;\n        max-width: 360px;\n        max-height: 300px;\n        overflow-y: auto;\n        z-index: 2147483647;\n        background: rgba(0, 0, 0, 0.85);\n        color: #0f0;\n        font-family: monospace;\n        font-size: 10px;\n        padding: 8px;\n        border-radius: 4px;\n        box-shadow: 0 0 4px rgba(0,0,0,0.6);\n        display: none;\n        white-space: pre-wrap;\n      `;document.body.appendChild(e);return{show(){e.style.display="block"},hide(){e.style.display="none"},log(...o){const t=document.createElement("div");t.textContent=o.map((e=>{if(e===window.rubicon){return"[RUBICON] window.rubicon object"}if(typeof e==="object"&&e!==null){try{return JSON.stringify(e,null,2)}catch(o){console.error("[RUBICON] Failed to stringify:",e,o);return String(e)}}return String(e)})).join(" ");e.appendChild(t);e.scrollTop=e.scrollHeight}}}()};if(document.readyState==="loading"){window.addEventListener("DOMContentLoaded",T)}else{T()}})();